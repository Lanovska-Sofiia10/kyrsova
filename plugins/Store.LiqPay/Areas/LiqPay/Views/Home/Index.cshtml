<h1>LiqPay</h1>
<h1>Оплата карткою</h1>

<form action="@Url.Action("ProcessPayment", "Home", new { area = "LiqPay" })" method="post">
    <div class="form-group">
        <label for="cardNumber">Номер картки</label>
        <input type="text" id="cardNumber" name="cardNumber" class="form-control" maxlength="19"
               placeholder="1234 5678 9012 3456" value="@ViewBag.CardNumber" required />
    </div>

    <div class="form-group">
        <label for="expiryDate">Термін дії (MM/YY)</label>
        <input type="text" id="expiryDate" name="expiryDate" class="form-control" maxlength="5"
               placeholder="MM/YY" value="@ViewBag.ExpiryDate" required />
    </div>

    <div class="form-group">
        <label for="cvv">CVV</label>
        <input type="password" id="cvv" name="cvv" class="form-control" maxlength="3" placeholder="XXX"
               value="@ViewBag.CVV" required />
    </div>

    @if (!ViewData.ModelState.IsValid)
    {
        <p class="text-danger">
            @string.Join("<br />", ViewData.ModelState.Values
                     .SelectMany(v => v.Errors)
                     .Select(e => e.ErrorMessage))
        </p>
    }

    <button type="submit" class="btn btn-success">Оплатити</button>
</form>

<script>
    // Форматування номера картки
    document.getElementById('cardNumber').addEventListener('input', function (e) {
        let value = e.target.value.replace(/\D/g, ''); // Видаляємо все, окрім цифр
        value = value.match(/.{1,4}/g)?.join(' ') ?? value; // Додаємо пробіли після кожних 4 цифр
        e.target.value = value;
    });

    // Форматування терміну дії
    document.getElementById('expiryDate').addEventListener('input', function (e) {
        let value = e.target.value.replace(/\D/g, ''); // Видаляємо все, окрім цифр
        if (value.length > 2) {
            value = value.substring(0, 2) + '/' + value.substring(2, 4); // Додаємо "/" після 2 цифр
        }
        e.target.value = value;
    });
</script>

